<div class="register-container bg-grayLight">
    <div class="flex min-h-full flex-col justify-center px-4 py-10 lg:px-8 ">
        <div class="sm:mx-auto sm:w-full sm:max-w-3xl">
            <img class="mx-auto h-10 w-auto"
                src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=blue&shade=600" alt="Your Company">
            <h2 class="mt-7 text-center text-3xl font-bold tracking-tight text-gray-900">Register</h2>
        </div>
    
        <div class="mt-7 sm:mx-auto sm:w-full sm:max-w-3xl">
            <form [formGroup]="registerForm" class="grid grid-cols-1 sm:grid-cols-2 gap-x-10 gap-y-6" (ngSubmit)="onSubmit()">
                <!-- first Name -->
                <div>
                    <label for="fName" class="block text-sm font-medium text-gray-700">First Name</label>
                    <input type="text" name="fName" id="name" formControlName="fName"
                        class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-light-blue sm:text-sm">
                        @if(registerForm.get('fName')?.touched && registerForm.get('fName')?.errors){
                            @if(registerForm.get('fName')?.getError('required')){
                                <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="font-semibold text-sm">Name is required.</p>
                                </div>
                            }
                            @if(registerForm.get('fName')?.getError('minlength')){
                                <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="font-semibold  text-sm">Name should be at least 3 characters long.</p>
                                </div>
                            }
                            @if(registerForm.get('fName')?.getError('maxlength')){
                                <div class=" rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="font-semibold  text-sm">Name cannot exceed 50 characters.</p>
                                </div>
                            }
                        }
    
                    </div>
                <!-- last Name -->
                <div>
                    <label for="lName" class="block text-sm font-medium text-gray-700">Last Name</label>
                    <input type="text" name="lName" id="name" formControlName="lName"
                        class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-light-blue sm:text-sm">
                        @if(registerForm.get('lName')?.touched && registerForm.get('lName')?.errors){
                            @if(registerForm.get('lName')?.getError('required')){
                                <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="font-semibold text-sm">Name is required.</p>
                                </div>
                            }
                            @if(registerForm.get('lName')?.getError('minlength')){
                                <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="font-semibold  text-sm">Name should be at least 3 characters long.</p>
                                </div>
                            }
                            @if(registerForm.get('lName')?.getError('maxlength')){
                                <div class=" rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="font-semibold  text-sm">Name cannot exceed 50 characters.</p>
                                </div>
                            }
                        }
    
                    </div>
                <!-- Email -->
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                    <input type="email" name="email" id="email" autocomplete="email" formControlName="email"
                        class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-light-blue sm:text-sm">
                        @if(registerForm.get('email')?.touched && registerForm.get('email')?.errors){
                            @if(registerForm.get('email')?.getError('required')){
                                <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="text-sm font-semibold">Email is required.</p>
                                </div>
                            }
                            @if(registerForm.get('email')?.getError('email')){
                                <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                    <p class="text-sm font-semibold">Invalid email format.</p>
                                </div>
                            }
                        }
                </div>
    
                <!-- Phone -->
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700">Phone</label>
                    <input type="tel" name="phone" id="phone" autocomplete="tel" formControlName="phone"
                        class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-light-blue sm:text-sm">
                        @if(registerForm.get('phone')?.touched && registerForm.get('phone')?.errors){
                            @if(registerForm.get('phone')?.getError('required')){
                              <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                <p class="font-semibold text-sm">Phone is required.</p>
                              </div>
                            }
                            @if(registerForm.get('phone')?.getError('pattern')){
                              <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                <p class="font-semibold text-sm">Enter a valid Egyptian phone number (starts with 010, 011, 012, or 015).</p>
                              </div>
                            }
                          }
                </div>
    
               
                <!-- Password -->
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" formControlName="password" name="password" id="password" autocomplete="new-password" required
                        class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-light-blue sm:text-sm">
                     
                @if(registerForm.get('password')?.touched && registerForm.get('password')?.errors){
                    @if(registerForm.get('password')?.getError('required')){
                    <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                        <p class="font-semibold text-sm">Password is required.</p>
                    </div>
                    }
                    @if(registerForm.get('password')?.getError('minlength')){
                    <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                        <p class="font-semibold text-sm">Password must be at least 6 characters long.</p>
                    </div>
                    }
                }
                </div>
    
                <!--Confirm Password-->
                <div>
                    <label for="repassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
                    <input type="password" formControlName="cPassword" name="repassword" id="repassword" autocomplete="new-password" required
                        class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-light-blue sm:text-sm">
                        @if(registerForm.get('cPassword')?.touched && registerForm.get('cPassword')?.errors){
                            @if(registerForm.get('cPassword')?.getError('required')){
                              <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                                <p class="font-semibold text-sm">Please confirm your password.</p>
                              </div>
                            }
                          }
                        
                          @if(registerForm.errors?.['passwordsMismatch'] && registerForm.get('cPassword')?.touched){
                            <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                              <p class="font-semibold text-sm">Passwords do not match.</p>
                            </div>
                        }
                </div>
                 <!-- Location -->
                 <div>
                    <label for="location" class="block text-sm font-medium text-gray-700">Location</label>
                    <select  
                    formControlName="location"
                    name="location" 
                    id="location" 
                    class="mt-2 mb-0 block w-full rounded-md bg-white px-3 py-2  text-gray-800 outline outline-1 outline-gray-300 focus:outline-2 focus:outline-light-blue sm:text-sm"
                    >
                    <option  value="" disabled selected>Select Closest location</option>
                    @for (loc of locations; track loc.value) {
                        <option [value]="loc.value">{{ loc.label }}</option>
                    }
                </select>
                    @if(registerForm.get('location')?.touched && registerForm.get('location')?.errors){
                        @if(registerForm.get('location')?.getError('required')){
                        <div class="rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                            <p class="font-semibold text-sm">Location is required.</p>
                        </div>
                        }
                    }
                 </div>
                
    
    
                <!--License-->
                <div class="sm:col-span-2">
                    <label for="license" class="text-sm font-medium me-4 text-gray-700">Driver License (Photo)</label>
                    <input type="file" formControlName="licenseImage" name="license" id="license" accept="image/*" (change)="onFileSelected($event)"
                        class="hidden" />
                    <label for="license"
                        class="mt-2 inline-block cursor-pointer rounded-md bg-light-blue px-4 py-2 text-sm text-white hover:bg-blue-500">
                        Choose Image
                    </label>
                    @if(registerForm.get('licenseImage')?.touched && registerForm.get('licenseImage')?.errors){
                        @if(registerForm.get('licenseImage')?.getError('required')){
                          <div class="mt-2 rounded-md bg-red-50 py-2 px-3 border border-red-200 text-red-600">
                            <p class="font-semibold text-sm">License image is required.</p>
                          </div>
                        }
                      }
                    
                    @if(licensePreview){
                    <div class="mt-2">
                        <p class="text-sm text-gray-500 mb-2">Preview:</p>
                        <img [src]="licensePreview" alt="License Preview" class="w-125 h-70 rounded shadow">
                    </div>
                    }
                </div>
                
                <!--Submit Button-->
                <div class="sm:col-span-2">
                    <button type="submit"
                        class="flex w-full justify-center cursor-pointer  rounded-md bg-light-blue px-4 py-3 font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">Register</button>
                </div>
            </form>
            <p class="mt-6 text-center text-sm/6 text-gray-500">
                Do you have account?
                <a routerLink="/login" class="font-semibold text-light-blue hover:text-blue-500">Login</a>
              </p>
        </div>
    </div>
</div>